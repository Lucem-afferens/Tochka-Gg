{"version":3,"file":"main.js","sources":["../../../src/js/modules/forms.js","../../../src/js/modules/equipment-gallery.js","../../../src/js/modules/booking.js","../../../src/js/modules/vr-modal.js","../../../src/js/main.js","../../../src/js/modules/navigation.js","../../../src/js/modules/smooth-scroll.js","../../../src/js/modules/animations.js","../../../src/js/modules/map.js","../../../src/js/modules/slider.js"],"sourcesContent":["/**\n * Forms Module\n * \n * Обработка форм, валидация\n */\n\nexport function initForms() {\n  const forms = document.querySelectorAll('form[data-tgg-form]');\n  \n  forms.forEach(form => {\n    form.addEventListener('submit', async (e) => {\n      e.preventDefault();\n      \n      const formData = new FormData(form);\n      const submitButton = form.querySelector('button[type=\"submit\"]');\n      const originalText = submitButton?.textContent;\n      \n      // Валидация\n      if (!validateForm(form)) {\n        return;\n      }\n      \n      // Показываем загрузку\n      if (submitButton) {\n        submitButton.disabled = true;\n        submitButton.textContent = 'Отправка...';\n      }\n      \n      try {\n        // Отправка через AJAX (если настроено)\n        const response = await fetch(form.action || window.location.href, {\n          method: 'POST',\n          body: formData\n        });\n        \n        if (response.ok) {\n          showFormMessage(form, 'Спасибо! Ваше сообщение отправлено.', 'success');\n          form.reset();\n        } else {\n          throw new Error('Ошибка отправки');\n        }\n      } catch (error) {\n        showFormMessage(form, 'Ошибка отправки. Попробуйте позже.', 'error');\n      } finally {\n        if (submitButton) {\n          submitButton.disabled = false;\n          submitButton.textContent = originalText;\n        }\n      }\n    });\n  });\n}\n\nfunction validateForm(form) {\n  const requiredFields = form.querySelectorAll('[required]');\n  let isValid = true;\n  \n  requiredFields.forEach(field => {\n    if (!field.value.trim()) {\n      isValid = false;\n      field.classList.add('error');\n      \n      field.addEventListener('input', () => {\n        field.classList.remove('error');\n      }, { once: true });\n    }\n  });\n  \n  // Email валидация\n  const emailFields = form.querySelectorAll('input[type=\"email\"]');\n  emailFields.forEach(field => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (field.value && !emailRegex.test(field.value)) {\n      isValid = false;\n      field.classList.add('error');\n    }\n  });\n  \n  return isValid;\n}\n\nfunction showFormMessage(form, message, type) {\n  const existingMessage = form.querySelector('.tgg-form-message');\n  if (existingMessage) {\n    existingMessage.remove();\n  }\n  \n  const messageEl = document.createElement('div');\n  messageEl.className = `tgg-form-message tgg-form-message--${type}`;\n  messageEl.textContent = message;\n  \n  form.insertBefore(messageEl, form.firstChild);\n  \n  setTimeout(() => {\n    messageEl.remove();\n  }, 5000);\n}\n\n\n","/**\n * Equipment Gallery Module\n * \n * Карусель фотографий для страницы оборудования\n */\n\nexport function initEquipmentGalleries() {\n  const galleries = document.querySelectorAll('[data-gallery]');\n  \n  if (galleries.length === 0) return;\n  \n  galleries.forEach(gallery => {\n    const galleryId = gallery.getAttribute('data-gallery');\n    const track = gallery.querySelector('.tgg-equipment-full__gallery-track');\n    const slides = track.querySelectorAll('.tgg-equipment-full__gallery-slide');\n    const prevBtn = document.querySelector(`[data-gallery-prev=\"${galleryId}\"]`);\n    const nextBtn = document.querySelector(`[data-gallery-next=\"${galleryId}\"]`);\n    const dotsContainer = document.querySelector(`[data-gallery-dots=\"${galleryId}\"]`);\n    \n    if (!track || slides.length === 0) return;\n    \n    let currentSlide = 0;\n    const totalSlides = slides.length;\n    \n    // Создаем точки навигации\n    if (dotsContainer && totalSlides > 1) {\n      for (let i = 0; i < totalSlides; i++) {\n        const dot = document.createElement('button');\n        dot.className = 'tgg-equipment-full__gallery-dot';\n        if (i === 0) dot.classList.add('active');\n        dot.setAttribute('data-gallery-dot', i);\n        dot.setAttribute('aria-label', `Перейти к слайду ${i + 1}`);\n        dotsContainer.appendChild(dot);\n      }\n    }\n    \n    const dots = dotsContainer ? dotsContainer.querySelectorAll('.tgg-equipment-full__gallery-dot') : [];\n    \n    // Функция обновления слайдера\n    function updateSlider() {\n      const offset = -currentSlide * 100;\n      track.style.transform = `translateX(${offset}%)`;\n      \n      // Обновляем активную точку\n      dots.forEach((dot, index) => {\n        if (index === currentSlide) {\n          dot.classList.add('active');\n        } else {\n          dot.classList.remove('active');\n        }\n      });\n      \n      // Кнопки всегда активны при цикличной карусели\n      if (prevBtn) {\n        prevBtn.disabled = false;\n      }\n      if (nextBtn) {\n        nextBtn.disabled = false;\n      }\n    }\n    \n    // Переход к следующему слайду (цикличный)\n    function nextSlide() {\n      currentSlide = (currentSlide + 1) % totalSlides;\n      updateSlider();\n    }\n    \n    // Переход к предыдущему слайду (цикличный)\n    function prevSlide() {\n      currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;\n      updateSlider();\n    }\n    \n    // Переход к конкретному слайду\n    function goToSlide(index) {\n      if (index >= 0 && index < totalSlides) {\n        currentSlide = index;\n        updateSlider();\n      }\n    }\n    \n    // Обработчики событий для кнопок\n    if (nextBtn) {\n      nextBtn.addEventListener('click', nextSlide);\n    }\n    \n    if (prevBtn) {\n      prevBtn.addEventListener('click', prevSlide);\n    }\n    \n    // Обработчики для точек\n    dots.forEach((dot, index) => {\n      dot.addEventListener('click', () => goToSlide(index));\n    });\n    \n    // Поддержка клавиатуры\n    gallery.addEventListener('keydown', (e) => {\n      if (e.key === 'ArrowLeft') {\n        prevSlide();\n      } else if (e.key === 'ArrowRight') {\n        nextSlide();\n      }\n    });\n    \n    // Автопрокрутка (опционально)\n    let autoplayInterval = null;\n    \n    function startAutoplay() {\n      if (totalSlides <= 1) return;\n      autoplayInterval = setInterval(() => {\n        nextSlide(); // Используем функцию nextSlide для цикличности\n      }, 5000); // 5 секунд\n    }\n    \n    function stopAutoplay() {\n      if (autoplayInterval) {\n        clearInterval(autoplayInterval);\n        autoplayInterval = null;\n      }\n    }\n    \n    // Останавливаем автопрокрутку при наведении\n    gallery.addEventListener('mouseenter', stopAutoplay);\n    gallery.addEventListener('mouseleave', startAutoplay);\n    \n    // Инициализация\n    updateSlider();\n    startAutoplay();\n    \n    // Поддержка свайпов на мобильных устройствах\n    let touchStartX = 0;\n    let touchEndX = 0;\n    \n    track.addEventListener('touchstart', (e) => {\n      touchStartX = e.changedTouches[0].screenX;\n    });\n    \n    track.addEventListener('touchend', (e) => {\n      touchEndX = e.changedTouches[0].screenX;\n      handleSwipe();\n    });\n    \n    function handleSwipe() {\n      const swipeThreshold = 50;\n      const diff = touchStartX - touchEndX;\n      \n      if (Math.abs(diff) > swipeThreshold) {\n        if (diff > 0) {\n          nextSlide();\n        } else {\n          prevSlide();\n        }\n      }\n    }\n  });\n}\n\n","/**\n * Booking Module\n * \n * Обработка бронирования через приложение Langame\n * Проверка установки приложения и перенаправление\n */\n\n/**\n * Проверка установки приложения Langame\n * @param {string} deepLink - Deep link для открытия приложения\n * @param {string} iosUrl - URL в App Store\n * @param {string} androidUrl - URL в Google Play\n */\nexport function initLangameBooking() {\n  // Обрабатываем обе кнопки (десктопную и мобильную)\n  const langameBtns = [\n    document.getElementById('langame-booking-btn'),\n    document.getElementById('langame-booking-btn-mobile')\n  ].filter(btn => btn !== null);\n\n  if (langameBtns.length === 0) return;\n\n  langameBtns.forEach(langameBtn => {\n    const deepLink = langameBtn.dataset.langameDeepLink || 'langame://booking';\n    const iosUrl = langameBtn.dataset.langameIos || 'https://apps.apple.com/ru/app/langame';\n    const androidUrl = langameBtn.dataset.langameAndroid || 'https://play.google.com/store/apps/details?id=ru.langame.app';\n\n    langameBtn.addEventListener('click', (e) => {\n      e.preventDefault();\n      \n      const userAgent = navigator.userAgent || navigator.vendor || window.opera;\n      const isIOS = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;\n      const isAndroid = /android/i.test(userAgent);\n\n      if (isIOS) {\n        handleIOSApp(deepLink, iosUrl);\n      } else if (isAndroid) {\n        handleAndroidApp(deepLink, androidUrl);\n      } else {\n        // Desktop - показываем выбор\n        showStoreLinks(iosUrl, androidUrl);\n      }\n    });\n  });\n}\n\n/**\n * Обработка открытия приложения на iOS\n */\nfunction handleIOSApp(deepLink, fallbackUrl) {\n  let appOpened = false;\n  const startTime = Date.now();\n  const timeout = 2500;\n\n  // Отслеживаем фокус страницы - если страница теряет фокус, значит приложение открылось\n  const handleBlur = () => {\n    appOpened = true;\n    window.removeEventListener('blur', handleBlur);\n    window.removeEventListener('visibilitychange', handleVisibilityChange);\n  };\n\n  const handleVisibilityChange = () => {\n    if (document.hidden) {\n      appOpened = true;\n      window.removeEventListener('blur', handleBlur);\n      window.removeEventListener('visibilitychange', handleVisibilityChange);\n    }\n  };\n\n  window.addEventListener('blur', handleBlur);\n  window.addEventListener('visibilitychange', handleVisibilityChange);\n\n  // Пытаемся открыть приложение\n  window.location.href = deepLink;\n\n  // Если через timeout приложение не открылось, перенаправляем в App Store\n  setTimeout(() => {\n    window.removeEventListener('blur', handleBlur);\n    window.removeEventListener('visibilitychange', handleVisibilityChange);\n\n    if (!appOpened && !document.hidden) {\n      // Приложение не открылось - перенаправляем в App Store\n      window.location.href = fallbackUrl;\n    }\n  }, timeout);\n}\n\n/**\n * Обработка открытия приложения на Android\n */\nfunction handleAndroidApp(deepLink, fallbackUrl) {\n  let appOpened = false;\n  const timeout = 2000;\n\n  // Отслеживаем фокус и видимость страницы\n  const handleBlur = () => {\n    appOpened = true;\n    window.removeEventListener('blur', handleBlur);\n    window.removeEventListener('visibilitychange', handleVisibilityChange);\n  };\n\n  const handleVisibilityChange = () => {\n    if (document.hidden) {\n      appOpened = true;\n      window.removeEventListener('blur', handleBlur);\n      window.removeEventListener('visibilitychange', handleVisibilityChange);\n    }\n  };\n\n  window.addEventListener('blur', handleBlur);\n  window.addEventListener('visibilitychange', handleVisibilityChange);\n\n  // Пытаемся открыть приложение\n  window.location.href = deepLink;\n\n  // Если через timeout приложение не открылось, перенаправляем в Google Play\n  setTimeout(() => {\n    window.removeEventListener('blur', handleBlur);\n    window.removeEventListener('visibilitychange', handleVisibilityChange);\n\n    if (!appOpened && !document.hidden) {\n      // Приложение не открылось - перенаправляем в Google Play\n      window.location.href = fallbackUrl;\n    }\n  }, timeout);\n}\n\n/**\n * Показать ссылки на магазины для Desktop\n */\nfunction showStoreLinks(iosUrl, androidUrl) {\n  // На десктопе просто открываем обе ссылки в новых вкладках\n  // Пользователь выберет нужную платформу\n  window.open(iosUrl, '_blank');\n  window.open(androidUrl, '_blank');\n}\n\n","/**\n * VR Modal\n * \n * Ненавязчивое модальное окно с рекламой VR арены\n * Появляется через 15 секунд после загрузки страницы\n */\n\n(function() {\n    'use strict';\n    \n    const MODAL_ID = 'vr-modal';\n    const STORAGE_KEY = 'vr_modal_closed';\n    const DELAY_MS = 15000; // 15 секунд\n    \n    let modal = null;\n    let overlay = null;\n    let closeBtn = null;\n    let timeoutId = null;\n    \n    /**\n     * Инициализация модального окна\n     */\n    function init() {\n        modal = document.getElementById(MODAL_ID);\n        if (!modal) return;\n        \n        overlay = modal.querySelector('.tgg-vr-modal__overlay');\n        closeBtn = modal.querySelector('.tgg-vr-modal__close');\n        \n        // Проверяем, не было ли модальное окно закрыто ранее (в этой сессии)\n        if (sessionStorage.getItem(STORAGE_KEY) === 'true') {\n            return;\n        }\n        \n        // Устанавливаем таймер на показ модального окна\n        timeoutId = setTimeout(showModal, DELAY_MS);\n        \n        // Обработчики событий\n        if (closeBtn) {\n            closeBtn.addEventListener('click', closeModal);\n        }\n        \n        if (overlay) {\n            overlay.addEventListener('click', closeModal);\n        }\n        \n        // Закрытие по Escape\n        document.addEventListener('keydown', handleKeydown);\n    }\n    \n    /**\n     * Показать модальное окно\n     */\n    function showModal() {\n        if (!modal) return;\n        \n        // Показываем модальное окно\n        modal.classList.add('tgg-vr-modal--visible');\n        modal.setAttribute('aria-hidden', 'false');\n        \n        // Блокируем скролл на body\n        document.body.style.overflow = 'hidden';\n        \n        // Фокус на кнопке закрытия для доступности\n        if (closeBtn) {\n            closeBtn.focus();\n        }\n    }\n    \n    /**\n     * Закрыть модальное окно\n     */\n    function closeModal() {\n        if (!modal) return;\n        \n        // Скрываем модальное окно\n        modal.classList.remove('tgg-vr-modal--visible');\n        modal.setAttribute('aria-hidden', 'true');\n        \n        // Восстанавливаем скролл\n        document.body.style.overflow = '';\n        \n        // Сохраняем в sessionStorage, чтобы не показывать повторно в этой сессии\n        sessionStorage.setItem(STORAGE_KEY, 'true');\n        \n        // Отменяем таймер, если модальное окно было закрыто до показа\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n            timeoutId = null;\n        }\n    }\n    \n    /**\n     * Обработка нажатия клавиш\n     */\n    function handleKeydown(e) {\n        if (e.key === 'Escape' && modal && modal.classList.contains('tgg-vr-modal--visible')) {\n            closeModal();\n        }\n    }\n    \n    // Инициализация при загрузке DOM\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', init);\n    } else {\n        init();\n    }\n})();\n\n","/**\n * Main JavaScript\n * \n * Главный файл JavaScript темы\n */\n\n// Импорт стилей\nimport '../sass/style.scss';\n\n// Импорт модулей\nimport { initNavigation } from './modules/navigation.js';\nimport { initSmoothScroll } from './modules/smooth-scroll.js';\nimport { initScrollAnimations, initParallax } from './modules/animations.js';\nimport { initMap } from './modules/map.js';\nimport { initForms } from './modules/forms.js';\nimport { initSliders } from './modules/slider.js';\nimport { initEquipmentGalleries } from './modules/equipment-gallery.js';\nimport { initLangameBooking } from './modules/booking.js';\nimport './modules/vr-modal.js';\n\n// ============================================\n// INITIALIZATION\n// ============================================\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Базовая функциональность\n  initNavigation();\n  initSmoothScroll();\n  initScrollAnimations();\n  initForms();\n  \n  // Дополнительные функции (если есть нужные элементы)\n  if (document.querySelector('.tgg-hero')) {\n    initParallax();\n  }\n  \n  if (document.getElementById('map')) {\n    initMap();\n  }\n  \n  // Слайдеры (если подключен Swiper)\n  initSliders();\n  \n  // Галереи оборудования\n  if (document.querySelector('.tgg-equipment-full__gallery-slider')) {\n    initEquipmentGalleries();\n  }\n  \n  // Бронирование через Langame\n  if (document.getElementById('langame-booking-btn')) {\n    initLangameBooking();\n  }\n  \n  \n  console.log('✅ Tochka Gg theme initialized');\n});\n\n","/**\n * Navigation Module\n * \n * Современная навигация с плавными анимациями\n * Поддержка активных ссылок, мобильное меню, эффекты\n */\n\nexport function initNavigation() {\n  const burger = document.querySelector('.tgg-header__burger');\n  const nav = document.querySelector('.tgg-header__nav');\n  const header = document.querySelector('.tgg-header');\n  const navList = document.querySelector('.tgg-nav__list');\n  \n  if (!burger || !nav) {\n    console.warn('Navigation elements not found');\n    return;\n  }\n  \n  // ============================================\n  // MOBILE MENU TOGGLE\n  // ============================================\n  \n  // Сохраняем позицию скролла перед блокировкой\n  let scrollPosition = 0;\n  \n  // Функция закрытия меню\n  function closeMenu() {\n    nav.classList.remove('active');\n    burger.classList.remove('active');\n    burger.setAttribute('aria-expanded', 'false');\n    \n    // Разблокируем скролл\n    if (window.innerWidth <= 1023) {\n      document.body.classList.remove('menu-open');\n      document.documentElement.classList.remove('menu-open');\n      document.body.style.top = '';\n      window.scrollTo(0, scrollPosition);\n    }\n  }\n  \n  burger.addEventListener('click', (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    const isExpanded = burger.getAttribute('aria-expanded') === 'true';\n    const willBeExpanded = !isExpanded;\n    \n    // Обновляем aria-expanded\n    burger.setAttribute('aria-expanded', willBeExpanded);\n    \n    // Переключаем классы\n    nav.classList.toggle('active');\n    burger.classList.toggle('active');\n    \n    // Блокировка скролла и кликов\n    if (window.innerWidth <= 1023) {\n      if (willBeExpanded) {\n        // Сохраняем позицию скролла\n        scrollPosition = window.pageYOffset || document.documentElement.scrollTop;\n        \n        // Блокируем скролл\n        document.body.classList.add('menu-open');\n        document.documentElement.classList.add('menu-open');\n        document.body.style.top = `-${scrollPosition}px`;\n      } else {\n        // Разблокируем скролл\n        document.body.classList.remove('menu-open');\n        document.documentElement.classList.remove('menu-open');\n        document.body.style.top = '';\n        window.scrollTo(0, scrollPosition);\n      }\n    } else {\n      document.body.classList.remove('menu-open');\n      document.documentElement.classList.remove('menu-open');\n    }\n    \n    // Обновляем aria-label для доступности\n    burger.setAttribute('aria-label', willBeExpanded \n      ? 'Закрыть меню' \n      : 'Открыть меню');\n    \n    // Отладочная информация\n    if (willBeExpanded) {\n      const navItems = nav.querySelectorAll('.tgg-nav__list li');\n      console.log('Menu opened, found items:', navItems.length);\n    }\n  });\n  \n  // Закрытие меню при клике вне его\n  document.addEventListener('click', (e) => {\n    if (window.innerWidth <= 1023 && nav.classList.contains('active')) {\n      if (!nav.contains(e.target) && !burger.contains(e.target)) {\n        closeMenu();\n      }\n    }\n  });\n  \n  // Закрытие меню при нажатии Escape\n  document.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape' && nav.classList.contains('active')) {\n      closeMenu();\n    }\n  });\n  \n  // Блокировка скролла при открытом меню\n  document.addEventListener('wheel', (e) => {\n    if (window.innerWidth <= 1023 && nav.classList.contains('active')) {\n      e.preventDefault();\n      return false;\n    }\n  }, { passive: false });\n  \n  // Блокировка touchmove (для мобильных устройств)\n  document.addEventListener('touchmove', (e) => {\n    if (window.innerWidth <= 1023 && nav.classList.contains('active')) {\n      // Разрешаем скролл только внутри меню\n      if (!nav.contains(e.target)) {\n        e.preventDefault();\n        return false;\n      }\n    }\n  }, { passive: false });\n  \n  // ============================================\n  // NAVIGATION LINKS\n  // ============================================\n  \n  const navLinks = nav.querySelectorAll('.tgg-nav__link, a');\n  \n  navLinks.forEach((link) => {\n    // Эффект при клике\n    link.addEventListener('click', (e) => {\n      // Плавная анимация клика\n      link.style.transform = 'scale(0.95)';\n      setTimeout(() => {\n        link.style.transform = '';\n      }, 150);\n      \n      // Закрываем мобильное меню после небольшой задержки\n      if (window.innerWidth <= 1023) {\n        setTimeout(() => {\n          closeMenu();\n        }, 300);\n      }\n    });\n  });\n  \n  // ============================================\n  // ACTIVE MENU ITEM DETECTION\n  // ============================================\n  \n  function setActiveMenuItem() {\n    const currentPath = window.location.pathname;\n    const currentHref = window.location.href;\n    \n    // Очищаем все активные классы\n    navLinks.forEach((link) => {\n      link.classList.remove('active');\n    });\n    \n    // Определяем активную ссылку по текущему URL\n    navLinks.forEach((link) => {\n      const href = link.getAttribute('href');\n      if (!href) return;\n      \n      // Нормализуем URL для сравнения\n      const linkUrl = new URL(href, window.location.origin);\n      const currentUrl = new URL(currentHref);\n      \n      // Проверяем совпадение пути\n      const linkPath = linkUrl.pathname.replace(/\\/$/, ''); // Убираем trailing slash\n      const currentPathNormalized = currentPath.replace(/\\/$/, '');\n      \n      // Для главной страницы\n      if ((linkPath === '' || linkPath === '/') && (currentPathNormalized === '' || currentPathNormalized === '/')) {\n        link.classList.add('active');\n        return;\n      }\n      \n      // Для других страниц - проверяем совпадение пути\n      if (linkPath !== '' && linkPath !== '/' && currentPathNormalized.includes(linkPath)) {\n        link.classList.add('active');\n        return;\n      }\n      \n      // Проверка по якорям (для секций на главной странице)\n      if (href.startsWith('#')) {\n        const targetId = href.substring(1);\n        const targetElement = document.getElementById(targetId);\n        if (targetElement) {\n          const rect = targetElement.getBoundingClientRect();\n          if (rect.top <= 200 && rect.bottom >= 100) {\n            link.classList.add('active');\n          }\n        }\n      }\n    });\n  }\n  \n  // Проверка активного элемента при загрузке и изменении URL\n  setActiveMenuItem();\n  \n  // Обновляем при изменении истории (навигация назад/вперед)\n  window.addEventListener('popstate', setActiveMenuItem);\n  \n  // ============================================\n  // HEADER SCROLL EFFECT + ACTIVE MENU DETECTION (объединены)\n  // ============================================\n  \n  let lastScroll = 0;\n  let scrollTicking = false;\n  let scrollTimeout;\n  \n  function handleScroll() {\n    const currentScroll = window.pageYOffset;\n    \n    // Обновление header (scrolled класс)\n    if (currentScroll > 50) {\n      header?.classList.add('scrolled');\n    } else {\n      header?.classList.remove('scrolled');\n    }\n    \n    // Обновление активного пункта меню (только для якорных ссылок, с debounce)\n    const anchorLinks = Array.from(navLinks).filter(link => {\n      const href = link.getAttribute('href');\n      return href && href.startsWith('#');\n    });\n    \n    if (anchorLinks.length > 0) {\n      clearTimeout(scrollTimeout);\n      scrollTimeout = setTimeout(() => {\n        setActiveMenuItem();\n      }, 100);\n    }\n    \n    lastScroll = currentScroll;\n    scrollTicking = false;\n  }\n  \n  // Единый обработчик скролла с requestAnimationFrame\n  window.addEventListener('scroll', () => {\n    if (!scrollTicking) {\n      window.requestAnimationFrame(handleScroll);\n      scrollTicking = true;\n    }\n  }, { passive: true });\n  \n  // ============================================\n  // SMOOTH SCROLL FOR ANCHOR LINKS\n  // ============================================\n  \n  navLinks.forEach(link => {\n    const href = link.getAttribute('href');\n    \n    if (href && href.startsWith('#')) {\n      link.addEventListener('click', (e) => {\n        const targetId = href.substring(1);\n        const targetElement = document.getElementById(targetId);\n        \n        if (targetElement) {\n          e.preventDefault();\n          \n          navLinks.forEach(l => l.classList.remove('active'));\n          link.classList.add('active');\n          \n          const headerHeight = header?.offsetHeight || 0;\n          const targetPosition = targetElement.offsetTop - headerHeight - 20;\n          \n          window.scrollTo({\n            top: targetPosition,\n            behavior: 'smooth'\n          });\n          \n          // Обновляем URL без перезагрузки\n          history.pushState(null, '', href);\n        }\n      });\n    }\n  });\n  \n  // ============================================\n  // RESIZE HANDLER\n  // ============================================\n  \n  let resizeTimeout;\n  window.addEventListener('resize', () => {\n    clearTimeout(resizeTimeout);\n    resizeTimeout = setTimeout(() => {\n      // Закрываем мобильное меню при переходе на десктоп\n      if (window.innerWidth > 1023) {\n        closeMenu();\n      }\n    }, 250);\n  });\n}\n","/**\n * Smooth Scroll Module\n * \n * Плавная прокрутка по якорным ссылкам\n */\n\nexport function initSmoothScroll() {\n  const links = document.querySelectorAll('a[href^=\"#\"]');\n  \n  links.forEach(link => {\n    link.addEventListener('click', (e) => {\n      const href = link.getAttribute('href');\n      \n      if (href === '#' || !href) return;\n      \n      const target = document.querySelector(href);\n      \n      if (target) {\n        e.preventDefault();\n        \n        const header = document.querySelector('.tgg-header');\n        const headerHeight = header ? header.offsetHeight : 80;\n        const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - headerHeight;\n        \n        window.scrollTo({\n          top: targetPosition,\n          behavior: 'smooth'\n        });\n        \n        // Update URL without jumping\n        if (history.pushState) {\n          history.pushState(null, null, href);\n        }\n      }\n    });\n  });\n}\n\n\n","/**\n * Animations Module\n * \n * Анимации появления элементов при скролле\n */\n\nexport function initScrollAnimations() {\n  const animatedElements = document.querySelectorAll(\n    '.tgg-advantages__item, .tgg-services__item, .tgg-archive__item, .tgg-card'\n  );\n  \n  if (animatedElements.length === 0) return;\n  \n  const observerOptions = {\n    root: null,\n    rootMargin: '0px 0px -100px 0px',\n    threshold: 0.1\n  };\n  \n  const observer = new IntersectionObserver((entries) => {\n    entries.forEach((entry, index) => {\n      if (entry.isIntersecting) {\n        setTimeout(() => {\n          entry.target.classList.add('tgg-animate-fade-in-up');\n          observer.unobserve(entry.target);\n        }, index * 100); // Задержка для последовательного появления\n      }\n    });\n  }, observerOptions);\n  \n  animatedElements.forEach(element => {\n    observer.observe(element);\n  });\n}\n\n/**\n * Parallax эффект для hero секции (оптимизирован с throttle)\n */\nexport function initParallax() {\n  const hero = document.querySelector('.tgg-hero');\n  if (!hero) return;\n  \n  const heroBg = hero.querySelector('.tgg-hero__bg');\n  if (!heroBg) return;\n  \n  let ticking = false;\n  \n  function updateParallax() {\n    const scrolled = window.pageYOffset;\n    const rate = scrolled * 0.5;\n    \n    heroBg.style.transform = `translateY(${rate}px)`;\n    ticking = false;\n  }\n  \n  window.addEventListener('scroll', () => {\n    if (!ticking) {\n      window.requestAnimationFrame(updateParallax);\n      ticking = true;\n    }\n  }, { passive: true });\n}\n\n\n","/**\n * Map Module\n * \n * Инициализация Яндекс.Карты\n */\n\nexport function initMap() {\n  const mapContainer = document.getElementById('map');\n  if (!mapContainer) return;\n  \n  const lat = parseFloat(mapContainer.dataset.lat) || 57.424953;\n  const lng = parseFloat(mapContainer.dataset.lng) || 56.963968;\n  const logoUrl = mapContainer.dataset.logo || '';\n  \n  // Проверка, загружена ли Яндекс.Карта API\n  if (typeof ymaps === 'undefined') {\n    console.warn('Яндекс.Карты API не загружен. Добавьте скрипт в functions.php');\n    \n    // Показываем ссылку на карту\n    mapContainer.innerHTML = `\n      <div class=\"tgg-contacts__map-placeholder\">\n        <p>Карта загружается...</p>\n        <p class=\"tgg-contacts__map-link\">\n          <a href=\"https://yandex.ru/maps/?pt=${lng},${lat}&z=17&l=map\" \n             target=\"_blank\" \n             rel=\"noopener noreferrer\">\n            Открыть карту в новом окне\n          </a>\n        </p>\n      </div>\n    `;\n    return;\n  }\n  \n  // Инициализация карты с темной кибер-темой\n  ymaps.ready(() => {\n    // Кастомная темная цветовая схема (более темная и менее яркая)\n    const darkTheme = [\n      {\n        \"featureType\": \"all\",\n        \"elementType\": \"geometry\",\n        \"stylers\": [\n          { \"color\": \"#0f1114\" }\n        ]\n      },\n      {\n        \"featureType\": \"all\",\n        \"elementType\": \"labels.text.fill\",\n        \"stylers\": [\n          { \"color\": \"#5a6578\", \"lightness\": -20 }\n        ]\n      },\n      {\n        \"featureType\": \"all\",\n        \"elementType\": \"labels.text.stroke\",\n        \"stylers\": [\n          { \"color\": \"#0f1114\" }\n        ]\n      },\n      {\n        \"featureType\": \"administrative\",\n        \"elementType\": \"geometry\",\n        \"stylers\": [\n          { \"color\": \"#161820\" }\n        ]\n      },\n      {\n        \"featureType\": \"landscape\",\n        \"elementType\": \"geometry\",\n        \"stylers\": [\n          { \"color\": \"#0d0f12\" }\n        ]\n      },\n      {\n        \"featureType\": \"poi\",\n        \"elementType\": \"geometry\",\n        \"stylers\": [\n          { \"color\": \"#161820\" }\n        ]\n      },\n      {\n        \"featureType\": \"poi\",\n        \"elementType\": \"labels.text.fill\",\n        \"stylers\": [\n          { \"color\": \"#4a5568\", \"lightness\": -30 }\n        ]\n      },\n      {\n        \"featureType\": \"road\",\n        \"elementType\": \"geometry\",\n        \"stylers\": [\n          { \"color\": \"#1a1c24\" }\n        ]\n      },\n      {\n        \"featureType\": \"road\",\n        \"elementType\": \"labels.text.fill\",\n        \"stylers\": [\n          { \"color\": \"#6b7585\", \"lightness\": -25 }\n        ]\n      },\n      {\n        \"featureType\": \"road.highway\",\n        \"elementType\": \"geometry\",\n        \"stylers\": [\n          { \"color\": \"#1f2229\" }\n        ]\n      },\n      {\n        \"featureType\": \"water\",\n        \"elementType\": \"geometry\",\n        \"stylers\": [\n          { \"color\": \"#050608\" }\n        ]\n      }\n    ];\n\n    const map = new ymaps.Map('map', {\n      center: [lat, lng],\n      zoom: 17,\n      controls: ['zoomControl', 'fullscreenControl'],\n      type: 'yandex#map',\n      // Отключаем масштабирование колесом мыши\n      behaviors: ['default', 'scrollZoom']\n    }, {\n      customStyles: darkTheme\n    });\n\n    // Изначально отключаем масштабирование колесом\n    map.behaviors.disable('scrollZoom');\n\n    // Включаем масштабирование колесом только после клика по карте\n    let scrollZoomEnabled = false;\n    map.events.add('click', () => {\n      if (!scrollZoomEnabled) {\n        map.behaviors.enable('scrollZoom');\n        scrollZoomEnabled = true;\n      }\n    });\n\n    // Кастомный маркер с логотипом в кибер-стиле\n    const markerHtml = logoUrl \n      ? `<div class=\"tgg-map-marker tgg-map-marker--with-logo\">\n          <div class=\"tgg-map-marker__pulse-ring\"></div>\n          <div class=\"tgg-map-marker__icon-wrapper\">\n            <div class=\"tgg-map-marker__logo-backdrop\">\n              <img src=\"${logoUrl}\" alt=\"Точка Gg\" class=\"tgg-map-marker__logo\">\n            </div>\n            <div class=\"tgg-map-marker__pin-tail\"></div>\n          </div>\n        </div>`\n      : `<div class=\"tgg-map-marker\">\n          <div class=\"tgg-map-marker__pulse-ring\"></div>\n          <div class=\"tgg-map-marker__icon-wrapper\">\n            <svg class=\"tgg-map-marker__icon\" width=\"48\" height=\"64\" viewBox=\"0 0 48 64\">\n              <defs>\n                <linearGradient id=\"pinGradient\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n                  <stop offset=\"0%\" style=\"stop-color:#3b82f6;stop-opacity:1\" />\n                  <stop offset=\"50%\" style=\"stop-color:#2563eb;stop-opacity:1\" />\n                  <stop offset=\"100%\" style=\"stop-color:#1e40af;stop-opacity:1\" />\n                </linearGradient>\n                <filter id=\"pinGlow\">\n                  <feGaussianBlur stdDeviation=\"4\" result=\"coloredBlur\"/>\n                  <feMerge>\n                    <feMergeNode in=\"coloredBlur\"/>\n                    <feMergeNode in=\"SourceGraphic\"/>\n                  </feMerge>\n                </filter>\n              </defs>\n              <ellipse cx=\"24\" cy=\"58\" rx=\"12\" ry=\"4\" fill=\"rgba(0, 0, 0, 0.3)\" opacity=\"0.5\"/>\n              <path d=\"M24 4 C29 4 33 6 36 9 C39 12 44 18 44 26 C44 34 36 50 24 60 C12 50 4 34 4 26 C4 18 9 12 12 9 C15 6 19 4 24 4 Z\" \n                    fill=\"url(#pinGradient)\" \n                    stroke=\"#ffffff\" \n                    stroke-width=\"2\" \n                    filter=\"url(#pinGlow)\"/>\n              <circle cx=\"24\" cy=\"20\" r=\"8\" fill=\"rgba(255, 255, 255, 0.9)\"/>\n              <circle cx=\"24\" cy=\"20\" r=\"5\" fill=\"#3b82f6\"/>\n              <circle cx=\"24\" cy=\"20\" r=\"2.5\" fill=\"#ffffff\"/>\n            </svg>\n          </div>\n        </div>`;\n\n    const placemarkLayout = ymaps.templateLayoutFactory.createClass(\n      markerHtml,\n      {\n        build: function () {\n          placemarkLayout.superclass.build.call(this);\n          this._element = this.getParentElement().getElementsByClassName('tgg-map-marker')[0];\n        }\n      }\n    );\n\n    const placemark = new ymaps.Placemark([lat, lng], {\n      balloonContent: '<div class=\"tgg-map-balloon\">' +\n                      '<div class=\"tgg-map-balloon__header\">' +\n                      '<svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" style=\"margin-right: 8px;\">' +\n                      '<path d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\" fill=\"#3b82f6\"/>' +\n                      '</svg>' +\n                      '<strong>Точка Gg</strong>' +\n                      '</div>' +\n                      '<div class=\"tgg-map-balloon__content\">ул. Голованова, 43, Кунгур</div>' +\n                      '</div>'\n    }, {\n      iconLayout: placemarkLayout,\n      iconShape: {\n        type: logoUrl ? 'Circle' : 'Circle',\n        coordinates: [0, 0],\n        radius: logoUrl ? 40 : 24\n      },\n      iconOffset: logoUrl ? [-40, -80] : [-24, -64]\n    });\n\n    map.geoObjects.add(placemark);\n\n    // Стилизация элементов управления\n    map.controls.get('zoomControl').options.set({\n      size: 'small',\n      position: { right: 10, top: 10 }\n    });\n\n    // Скрываем placeholder\n    const placeholder = mapContainer.querySelector('.tgg-contacts__map-placeholder');\n    if (placeholder) {\n      placeholder.style.display = 'none';\n    }\n  });\n}\n\n\n","/**\n * Slider Module\n * \n * Карусели и слайдеры (использует Swiper если подключен)\n */\n\nexport function initSliders() {\n  // Проверка наличия Swiper\n  if (typeof Swiper === 'undefined') {\n    console.warn('Swiper не подключен. Добавьте его в package.json если нужен.');\n    return;\n  }\n  \n  // Инициализация слайдеров\n  const sliderSelectors = [\n    '.tgg-slider-hero',\n    '.tgg-slider-gallery',\n    '.tgg-slider-tournaments'\n  ];\n  \n  sliderSelectors.forEach(selector => {\n    const sliderElement = document.querySelector(selector);\n    if (!sliderElement) return;\n    \n    new Swiper(sliderElement, {\n      slidesPerView: 1,\n      spaceBetween: 30,\n      loop: true,\n      autoplay: {\n        delay: 5000,\n        disableOnInteraction: false,\n      },\n      pagination: {\n        el: '.swiper-pagination',\n        clickable: true,\n      },\n      navigation: {\n        nextEl: '.swiper-button-next',\n        prevEl: '.swiper-button-prev',\n      },\n      breakpoints: {\n        640: {\n          slidesPerView: 2,\n        },\n        1024: {\n          slidesPerView: 3,\n        },\n      },\n    });\n  });\n}\n\n\n"],"names":["showFormMessage","form","message","type","existingMessage","querySelector","remove","messageEl","document","createElement","className","textContent","insertBefore","firstChild","setTimeout","initEquipmentGalleries","galleries","querySelectorAll","length","forEach","gallery","galleryId","getAttribute","track","slides","prevBtn","nextBtn","dotsContainer","currentSlide","totalSlides","i","dot","classList","add","setAttribute","appendChild","dots","updateSlider","offset","style","transform","index","disabled","nextSlide","prevSlide","addEventListener","goToSlide","e","key","autoplayInterval","startAutoplay","setInterval","clearInterval","touchStartX","touchEndX","changedTouches","screenX","swipeThreshold","diff","Math","abs","handleSwipe","initLangameBooking","langameBtns","getElementById","filter","btn","langameBtn","deepLink","dataset","langameDeepLink","iosUrl","langameIos","androidUrl","langameAndroid","preventDefault","userAgent","navigator","vendor","window","opera","isIOS","test","MSStream","isAndroid","fallbackUrl","appOpened","timeout","handleBlur","removeEventListener","handleVisibilityChange","hidden","location","href","handleIOSApp","handleAndroidApp","open","showStoreLinks","STORAGE_KEY","modal","overlay","closeBtn","timeoutId","init","sessionStorage","getItem","showModal","closeModal","handleKeydown","body","overflow","focus","setItem","clearTimeout","contains","readyState","burger","nav","header","console","warn","scrollPosition","closeMenu","innerWidth","documentElement","top","scrollTo","stopPropagation","willBeExpanded","toggle","pageYOffset","scrollTop","navItems","log","target","passive","navLinks","setActiveMenuItem","currentPath","pathname","currentHref","link","linkUrl","URL","origin","linkPath","replace","currentPathNormalized","includes","startsWith","targetId","substring","targetElement","rect","getBoundingClientRect","bottom","scrollTimeout","resizeTimeout","scrollTicking","handleScroll","Array","from","requestAnimationFrame","l","headerHeight","offsetHeight","targetPosition","offsetTop","behavior","history","pushState","initNavigation","animatedElements","observer","IntersectionObserver","entries","entry","isIntersecting","unobserve","root","rootMargin","threshold","element","observe","initScrollAnimations","async","formData","FormData","submitButton","originalText","requiredFields","isValid","field","value","trim","once","emailRegex","validateForm","fetch","action","method","ok","Error","reset","error","hero","heroBg","ticking","updateParallax","rate","initParallax","mapContainer","lat","parseFloat","lng","logoUrl","logo","ymaps","innerHTML","ready","map","Map","center","zoom","controls","behaviors","customStyles","featureType","elementType","stylers","color","lightness","disable","scrollZoomEnabled","events","enable","markerHtml","placemarkLayout","templateLayoutFactory","createClass","build","superclass","call","this","_element","getParentElement","getElementsByClassName","placemark","Placemark","balloonContent","iconLayout","iconShape","coordinates","radius","iconOffset","geoObjects","get","options","set","size","position","right","placeholder","display","initMap","Swiper","selector","sliderElement","slidesPerView","spaceBetween","loop","autoplay","delay","disableOnInteraction","pagination","el","clickable","navigation","nextEl","prevEl","breakpoints","initSliders"],"mappings":"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"}