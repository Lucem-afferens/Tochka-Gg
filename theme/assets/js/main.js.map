{"version":3,"file":"main.js","sources":["../../../src/js/modules/forms.js","../../../src/js/main.js","../../../src/js/modules/navigation.js","../../../src/js/modules/smooth-scroll.js","../../../src/js/modules/animations.js","../../../src/js/modules/map.js","../../../src/js/modules/slider.js"],"sourcesContent":["/**\n * Forms Module\n * \n * Обработка форм, валидация\n */\n\nexport function initForms() {\n  const forms = document.querySelectorAll('form[data-tgg-form]');\n  \n  forms.forEach(form => {\n    form.addEventListener('submit', async (e) => {\n      e.preventDefault();\n      \n      const formData = new FormData(form);\n      const submitButton = form.querySelector('button[type=\"submit\"]');\n      const originalText = submitButton?.textContent;\n      \n      // Валидация\n      if (!validateForm(form)) {\n        return;\n      }\n      \n      // Показываем загрузку\n      if (submitButton) {\n        submitButton.disabled = true;\n        submitButton.textContent = 'Отправка...';\n      }\n      \n      try {\n        // Отправка через AJAX (если настроено)\n        const response = await fetch(form.action || window.location.href, {\n          method: 'POST',\n          body: formData\n        });\n        \n        if (response.ok) {\n          showFormMessage(form, 'Спасибо! Ваше сообщение отправлено.', 'success');\n          form.reset();\n        } else {\n          throw new Error('Ошибка отправки');\n        }\n      } catch (error) {\n        showFormMessage(form, 'Ошибка отправки. Попробуйте позже.', 'error');\n      } finally {\n        if (submitButton) {\n          submitButton.disabled = false;\n          submitButton.textContent = originalText;\n        }\n      }\n    });\n  });\n}\n\nfunction validateForm(form) {\n  const requiredFields = form.querySelectorAll('[required]');\n  let isValid = true;\n  \n  requiredFields.forEach(field => {\n    if (!field.value.trim()) {\n      isValid = false;\n      field.classList.add('error');\n      \n      field.addEventListener('input', () => {\n        field.classList.remove('error');\n      }, { once: true });\n    }\n  });\n  \n  // Email валидация\n  const emailFields = form.querySelectorAll('input[type=\"email\"]');\n  emailFields.forEach(field => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (field.value && !emailRegex.test(field.value)) {\n      isValid = false;\n      field.classList.add('error');\n    }\n  });\n  \n  return isValid;\n}\n\nfunction showFormMessage(form, message, type) {\n  const existingMessage = form.querySelector('.tgg-form-message');\n  if (existingMessage) {\n    existingMessage.remove();\n  }\n  \n  const messageEl = document.createElement('div');\n  messageEl.className = `tgg-form-message tgg-form-message--${type}`;\n  messageEl.textContent = message;\n  \n  form.insertBefore(messageEl, form.firstChild);\n  \n  setTimeout(() => {\n    messageEl.remove();\n  }, 5000);\n}\n\n\n","/**\n * Main JavaScript\n * \n * Главный файл JavaScript темы\n */\n\n// Импорт стилей\nimport '../sass/style.scss';\n\n// Импорт модулей\nimport { initNavigation } from './modules/navigation.js';\nimport { initSmoothScroll } from './modules/smooth-scroll.js';\nimport { initScrollAnimations, initParallax } from './modules/animations.js';\nimport { initMap } from './modules/map.js';\nimport { initForms } from './modules/forms.js';\nimport { initSliders } from './modules/slider.js';\n\n// ============================================\n// INITIALIZATION\n// ============================================\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Базовая функциональность\n  initNavigation();\n  initSmoothScroll();\n  initScrollAnimations();\n  initForms();\n  \n  // Дополнительные функции (если есть нужные элементы)\n  if (document.querySelector('.tgg-hero')) {\n    initParallax();\n  }\n  \n  if (document.getElementById('map')) {\n    initMap();\n  }\n  \n  // Слайдеры (если подключен Swiper)\n  initSliders();\n  \n  console.log('✅ Tochka Gg theme initialized');\n});\n\n","/**\n * Navigation Module\n * \n * Мобильное меню, навигация, активные ссылки\n */\n\nexport function initNavigation() {\n  const burger = document.querySelector('.tgg-header__burger');\n  const nav = document.querySelector('.tgg-header__nav');\n  const header = document.querySelector('.tgg-header');\n  \n  if (!burger || !nav) return;\n  \n  // Toggle mobile menu\n  burger.addEventListener('click', () => {\n    const isExpanded = burger.getAttribute('aria-expanded') === 'true';\n    burger.setAttribute('aria-expanded', !isExpanded);\n    nav.classList.toggle('active');\n    burger.classList.toggle('active');\n    document.body.classList.toggle('menu-open');\n  });\n  \n  // Header scroll effect\n  let lastScroll = 0;\n  window.addEventListener('scroll', () => {\n    const currentScroll = window.pageYOffset;\n    \n    if (currentScroll > 100) {\n      header?.classList.add('scrolled');\n    } else {\n      header?.classList.remove('scrolled');\n    }\n    \n    lastScroll = currentScroll;\n  });\n  \n  // Close menu on link click\n  const navLinks = nav.querySelectorAll('a');\n  navLinks.forEach((link, index) => {\n    // Добавляем эффект волны при клике\n    link.addEventListener('click', (e) => {\n      // Анимация клика\n      link.style.transform = 'scale(0.95)';\n      setTimeout(() => {\n        link.style.transform = '';\n      }, 150);\n      \n      // Закрываем мобильное меню\n      if (window.innerWidth <= 1023) {\n        setTimeout(() => {\n          nav.classList.remove('active');\n          burger.classList.remove('active');\n          burger.setAttribute('aria-expanded', 'false');\n          document.body.classList.remove('menu-open');\n        }, 200);\n      }\n    });\n    \n    // Эффект при наведении для десктопа\n    if (window.innerWidth > 1023) {\n      link.addEventListener('mouseenter', () => {\n        link.classList.add('hover-active');\n      });\n      \n      link.addEventListener('mouseleave', () => {\n        link.classList.remove('hover-active');\n      });\n    }\n  });\n  \n  // Active menu item on scroll\n  const sections = document.querySelectorAll('section[id]');\n  const observerOptions = {\n    rootMargin: '-20% 0px -70% 0px',\n    threshold: 0\n  };\n  \n  const observer = new IntersectionObserver((entries) => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        const id = entry.target.getAttribute('id');\n        navLinks.forEach(link => {\n          link.classList.remove('active');\n          if (link.getAttribute('href') === `#${id}`) {\n            link.classList.add('active');\n          }\n        });\n      }\n    });\n  }, observerOptions);\n  \n  sections.forEach(section => observer.observe(section));\n}\n\n\n","/**\n * Smooth Scroll Module\n * \n * Плавная прокрутка по якорным ссылкам\n */\n\nexport function initSmoothScroll() {\n  const links = document.querySelectorAll('a[href^=\"#\"]');\n  \n  links.forEach(link => {\n    link.addEventListener('click', (e) => {\n      const href = link.getAttribute('href');\n      \n      if (href === '#' || !href) return;\n      \n      const target = document.querySelector(href);\n      \n      if (target) {\n        e.preventDefault();\n        \n        const header = document.querySelector('.tgg-header');\n        const headerHeight = header ? header.offsetHeight : 80;\n        const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - headerHeight;\n        \n        window.scrollTo({\n          top: targetPosition,\n          behavior: 'smooth'\n        });\n        \n        // Update URL without jumping\n        if (history.pushState) {\n          history.pushState(null, null, href);\n        }\n      }\n    });\n  });\n}\n\n\n","/**\n * Animations Module\n * \n * Анимации появления элементов при скролле\n */\n\nexport function initScrollAnimations() {\n  const animatedElements = document.querySelectorAll(\n    '.tgg-advantages__item, .tgg-services__item, .tgg-archive__item, .tgg-card'\n  );\n  \n  if (animatedElements.length === 0) return;\n  \n  const observerOptions = {\n    root: null,\n    rootMargin: '0px 0px -100px 0px',\n    threshold: 0.1\n  };\n  \n  const observer = new IntersectionObserver((entries) => {\n    entries.forEach((entry, index) => {\n      if (entry.isIntersecting) {\n        setTimeout(() => {\n          entry.target.classList.add('tgg-animate-fade-in-up');\n          observer.unobserve(entry.target);\n        }, index * 100); // Задержка для последовательного появления\n      }\n    });\n  }, observerOptions);\n  \n  animatedElements.forEach(element => {\n    observer.observe(element);\n  });\n}\n\n/**\n * Parallax эффект для hero секции\n */\nexport function initParallax() {\n  const hero = document.querySelector('.tgg-hero');\n  if (!hero) return;\n  \n  const heroBg = hero.querySelector('.tgg-hero__bg');\n  if (!heroBg) return;\n  \n  window.addEventListener('scroll', () => {\n    const scrolled = window.pageYOffset;\n    const rate = scrolled * 0.5;\n    \n    heroBg.style.transform = `translateY(${rate}px)`;\n  });\n}\n\n\n","/**\n * Map Module\n * \n * Инициализация Яндекс.Карты\n */\n\nexport function initMap() {\n  const mapContainer = document.getElementById('map');\n  if (!mapContainer) return;\n  \n  const lat = parseFloat(mapContainer.dataset.lat) || 57.424953;\n  const lng = parseFloat(mapContainer.dataset.lng) || 56.963968;\n  \n  // Проверка, загружена ли Яндекс.Карта API\n  if (typeof ymaps === 'undefined') {\n    console.warn('Яндекс.Карты API не загружен. Добавьте скрипт в functions.php');\n    \n    // Показываем ссылку на карту\n    mapContainer.innerHTML = `\n      <div class=\"tgg-contacts__map-placeholder\">\n        <p>Карта загружается...</p>\n        <p class=\"tgg-contacts__map-link\">\n          <a href=\"https://yandex.ru/maps/?pt=${lng},${lat}&z=17&l=map\" \n             target=\"_blank\" \n             rel=\"noopener noreferrer\">\n            Открыть карту в новом окне\n          </a>\n        </p>\n      </div>\n    `;\n    return;\n  }\n  \n  // Инициализация карты\n  ymaps.ready(() => {\n    const map = new ymaps.Map('map', {\n      center: [lat, lng],\n      zoom: 17,\n      controls: ['zoomControl', 'fullscreenControl']\n    });\n    \n    const placemark = new ymaps.Placemark([lat, lng], {\n      balloonContent: 'Точка Gg<br>ул. Голованова, 43, Кунгур'\n    }, {\n      preset: 'islands#blueDotIcon'\n    });\n    \n    map.geoObjects.add(placemark);\n    \n    // Скрываем placeholder\n    const placeholder = mapContainer.querySelector('.tgg-contacts__map-placeholder');\n    if (placeholder) {\n      placeholder.style.display = 'none';\n    }\n  });\n}\n\n\n","/**\n * Slider Module\n * \n * Карусели и слайдеры (использует Swiper если подключен)\n */\n\nexport function initSliders() {\n  // Проверка наличия Swiper\n  if (typeof Swiper === 'undefined') {\n    console.warn('Swiper не подключен. Добавьте его в package.json если нужен.');\n    return;\n  }\n  \n  // Инициализация слайдеров\n  const sliderSelectors = [\n    '.tgg-slider-hero',\n    '.tgg-slider-gallery',\n    '.tgg-slider-tournaments'\n  ];\n  \n  sliderSelectors.forEach(selector => {\n    const sliderElement = document.querySelector(selector);\n    if (!sliderElement) return;\n    \n    new Swiper(sliderElement, {\n      slidesPerView: 1,\n      spaceBetween: 30,\n      loop: true,\n      autoplay: {\n        delay: 5000,\n        disableOnInteraction: false,\n      },\n      pagination: {\n        el: '.swiper-pagination',\n        clickable: true,\n      },\n      navigation: {\n        nextEl: '.swiper-button-next',\n        prevEl: '.swiper-button-prev',\n      },\n      breakpoints: {\n        640: {\n          slidesPerView: 2,\n        },\n        1024: {\n          slidesPerView: 3,\n        },\n      },\n    });\n  });\n}\n\n\n"],"names":["showFormMessage","form","message","type","existingMessage","querySelector","remove","messageEl","document","createElement","className","textContent","insertBefore","firstChild","setTimeout","addEventListener","burger","nav","header","isExpanded","getAttribute","setAttribute","classList","toggle","body","window","pageYOffset","add","navLinks","querySelectorAll","forEach","link","index","e","style","transform","innerWidth","sections","observer","IntersectionObserver","entries","entry","isIntersecting","id","target","rootMargin","threshold","section","observe","initNavigation","href","preventDefault","headerHeight","offsetHeight","targetPosition","getBoundingClientRect","top","scrollTo","behavior","history","pushState","animatedElements","length","unobserve","root","element","initScrollAnimations","async","formData","FormData","submitButton","originalText","requiredFields","isValid","field","value","trim","once","emailRegex","test","validateForm","disabled","fetch","action","location","method","ok","Error","reset","error","hero","heroBg","rate","initParallax","getElementById","mapContainer","lat","parseFloat","dataset","lng","ymaps","console","warn","innerHTML","ready","map","Map","center","zoom","controls","placemark","Placemark","balloonContent","preset","geoObjects","placeholder","display","initMap","Swiper","selector","sliderElement","slidesPerView","spaceBetween","loop","autoplay","delay","disableOnInteraction","pagination","el","clickable","navigation","nextEl","prevEl","breakpoints","initSliders","log"],"mappings":"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"}