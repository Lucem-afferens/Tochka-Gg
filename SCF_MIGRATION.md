# Миграция на Secure Custom Fields (SCF)

## Обзор

Проект был успешно мигрирован с **Advanced Custom Fields (ACF)** на **Secure Custom Fields (SCF)**. SCF является форком ACF, созданным для устранения проблем безопасности и удаления коммерческих предложений.

## Что изменилось

### 1. Файлы

- ✅ **Создан**: `theme/inc/scf-options.php` - регистрация Options Page для SCF
- ✅ **Удален**: `theme/inc/acf-options.php` (заменен на scf-options.php)
- ✅ **Обновлен**: `theme/functions.php` - подключение scf-options.php вместо acf-options.php
- ✅ **Обновлен**: `theme/inc/theme-helpers.php` - комментарии обновлены для SCF
- ✅ **Обновлены**: все шаблоны с упоминаниями ACF

### 2. API совместимость

**Важно**: SCF полностью совместим с API ACF, поэтому:
- ✅ Функция `get_field()` работает без изменений
- ✅ Функция `the_field()` работает без изменений
- ✅ Все существующие поля и их структура остаются без изменений
- ✅ Options Page работает аналогично ACF Pro

### 3. Хуки

SCF использует те же хуки, что и ACF:
- `scf/init` - основной хук инициализации (аналог `acf/init`)
- `acf/init` - также поддерживается для совместимости

## Установка SCF

### Способ 1: Через админ-панель WordPress

1. Перейдите в **Плагины** > **Добавить новый**
2. Найдите **"Secure Custom Fields"**
3. Нажмите **"Установить"**, затем **"Активировать"**

### Способ 2: Вручную

1. Скачайте последнюю версию SCF с [WordPress.org](https://wordpress.org/plugins/secure-custom-fields/)
2. Распакуйте архив и загрузите папку плагина в `/wp-content/plugins/`
3. Активируйте плагин через админ-панель WordPress

### Важно

При установке SCF автоматически деактивируются плагины ACF и ACF Pro, чтобы избежать конфликтов.

## Миграция данных

### Если у вас уже были данные в ACF

1. **Экспорт полей ACF**:
   - Перейдите в ACF > **Полевые группы**
   - Экспортируйте все группы полей (JSON формат)

2. **Импорт в SCF**:
   - После установки SCF перейдите в **SCF** > **Полевые группы**
   - Нажмите **"Импорт"**
   - Загрузите экспортированный JSON файл
   - Все поля будут импортированы автоматически

3. **Проверка данных**:
   - Убедитесь, что все данные на страницах отображаются корректно
   - Проверьте Options Page (если использовалась)

### Если начинаете с нуля

1. Установите SCF
2. Создайте группы полей через **SCF** > **Полевые группы**
3. Настройте Options Page через **SCF** > **Настройки темы** (если нужно)

## Структура полей в проекте

### Options Page (Настройки темы)

Все глобальные настройки хранятся в Options Page:

- `logo` - Логотип сайта
- `footer_logo` - Логотип в футере
- `footer_description` - Описание в футере
- `phone_main` - Основной телефон
- `email_main` - Основной email
- `telegram_username` - Telegram канал
- `address_full` - Полный адрес
- `map_latitude` - Широта для карты
- `map_longitude` - Долгота для карты
- `working_hours` - Часы работы
- `copyright_text` - Текст копирайта
- `booking_button_text` - Текст кнопки бронирования
- `booking_link` - Ссылка на страницу бронирования
- `vr_title` - Заголовок VR арены
- `vr_description` - Описание VR арены
- `vr_link` - Ссылка на VR арену
- `vr_phone` - Телефон VR арены
- `vr_image` - Изображение VR арены
- `social_networks` - Социальные сети (repeater)

## Проверка работоспособности

После установки SCF проверьте:

1. ✅ **Options Page доступна**: Перейдите в **Настройки темы** в админ-панели
2. ✅ **Поля отображаются**: Проверьте, что все поля на страницах работают
3. ✅ **Данные сохраняются**: Сохраните изменения в Options Page и проверьте на фронтенде
4. ✅ **Нет ошибок в консоли**: Откройте консоль браузера и убедитесь, что нет ошибок

## Откат на ACF (если нужно)

Если по какой-то причине нужно вернуться к ACF:

1. Деактивируйте SCF
2. Установите ACF или ACF Pro
3. Импортируйте группы полей обратно
4. Восстановите файл `theme/inc/acf-options.php` из git истории
5. Обновите `theme/functions.php` для подключения acf-options.php

## Полезные ссылки

- [SCF на WordPress.org](https://wordpress.org/plugins/secure-custom-fields/)
- [Документация SCF](https://developer.wordpress.org/secure-custom-fields/)
- [Форум поддержки SCF](https://wordpress.org/support/plugin/secure-custom-fields/)

## Поддержка

Если возникли проблемы с миграцией:

1. Проверьте, что SCF установлен и активирован
2. Убедитесь, что ACF деактивирован (SCF делает это автоматически)
3. Проверьте консоль браузера на наличие ошибок
4. Проверьте логи WordPress на наличие ошибок PHP

---

**Дата миграции**: 2024
**Версия темы**: 2.1.0

